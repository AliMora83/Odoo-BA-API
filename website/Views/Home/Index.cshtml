@{
    ViewBag.Title = "HOME";
    Layout = "~/Views/Shared/_Layout.cshtml";
    BridgingAfricaDBEntities db = new BridgingAfricaDBEntities();
    var categories = db.CategoryTbls.Where(s => s.IsActive == true).Select(s => new { s.Id, s.CategoryName, s.Image, s.CategoryOrder }).OrderBy(s => s.CategoryOrder).ToList();

    var sliders = db.SliderTbls.Where(s => s.IsActive == true).Select(s => new { s.Id, s.UpperTitle, s.LowerTitle, s.Image, s.ImageOrder }).OrderBy(s => s.ImageOrder).ToList();
}
<style>
    #msg {
        display: none;
        color: red;
        margin-top: 5px;
    }

    #map {
        margin-bottom: 50px;
        height: 300px;
        width: 100%;
        display: none;
    }
</style>
<script src="~/assets/js/locationmap.js"></script>
<script>
    $(document).ready(function () {
        $.ajax({
            url: '/api/homeapi/AutoDisapproveProvider',
            type: 'GET',
            success: function (response) {
                if (response.Status === "Success") {
                    console.log("Auto disapprove process completed successfully.");
                } else {
                    console.warn("Auto disapprove failed:", response.Message);
                }
            },
            error: function (xhr, status, error) {
                console.error("Error calling AutoDisapproveProvider:", error);
            }
        });
    });
    $(document).ready(function () {
        $('#txtsearchservice').autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: '/api/ProviderApi/GetServices?keyword=' + request.term,
                    type: 'get',
                    dataType: 'json',
                    success: function (json) {
                        if (json.length === 0) {
                            response([{ label: "No service found", value: "" }]);
                        } else {
                            response($.map(json, function (data) {
                                return {
                                    label: data.ServiceName,
                                    value: data.ServiceName,
                                    id: data.Id,
                                    cid: data.CategoryID,
                                    scid: data.SubCategoryID,
                                };
                            }));
                        }
                    },
                    error: function (xmlHttpRequest, textStatus, errorThrown) {
                        console.log(errorThrown, textStatus);
                    }
                });
            },
            select: function (event, ui) {
                if (ui.item.value === "") {
                    event.preventDefault();
                    $('#txtsearchservice').val("");
                    $('#hdServiceID').val("");
                    $('#hdServiceID').val("");
                    $('#hdCID').val("");
                    $('#hdSCID').val("");
                    return false;
                }
                $('#hdServiceID').val(ui.item.id);
                $('#hdCID').val(ui.item.cid);
                $('#hdSCID').val(ui.item.scid);
            },
            close: function (event, ui) {
                //$('#txtDestination').focus();
            }
        });

        $('#txtCity').autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: '/MobileApp/Home/SearchCities?searchTerm=' + request.term,
                    type: 'get',
                    dataType: 'json',
                    success: function (json) {
                        if (json.length === 0) {
                            response([{ label: "No city found", value: "" }]);
                        } else {
                            response($.map(json, function (data) {
                                return {
                                    label: data.CityName,
                                    value: data.CityName,
                                    id: data.Id,
                                };
                            }));
                        }
                    },
                    error: function (xmlHttpRequest, textStatus, errorThrown) {
                        console.log(errorThrown, textStatus);
                    }
                });
            },
            select: function (event, ui) {
                if (ui.item.value === "") {
                    event.preventDefault();
                    $('#hdCityID').val("");
                    $('#txtArea').val("");
                    $('#hdAreaID').val("");
                    return false;
                }
                $('#hdCityID').val(ui.item.id);
                $('#txtArea').val("");
                $('#hdAreaID').val("");
                getAreas();
            },
            close: function (event, ui) {
                //$('#txtDestination').focus();
            }
        });

        function getAreas() {
            $('#txtArea').autocomplete({
                source: function (request, response) {
                    var cityID = $("#hdCityID").val();
                    if (!cityID) {
                        alert("Please select city first");
                    }
                    else {
                        $.ajax({
                            url: '/MobileApp/Home/SearchAreas?cityId=' + cityID + '&searchTerm=' + request.term,
                            type: 'get',
                            dataType: 'json',
                            success: function (json) {
                                if (json.length === 0) {
                                    response([{ label: "No area/suburb found", value: "" }]);
                                } else {
                                    response($.map(json, function (data) {
                                        return {
                                            label: data.AreaName,
                                            value: data.AreaName,
                                            id: data.Id,
                                        };
                                    }));
                                }
                            },
                            error: function (xmlHttpRequest, textStatus, errorThrown) {
                                console.log(errorThrown, textStatus);
                            }
                        });
                    }
                },
                select: function (event, ui) {
                    if (ui.item.value === "") {
                        event.preventDefault();
                        $('#hdAreaID').val("");
                        return false;
                    }
                    $('#hdAreaID').val(ui.item.id);
                },
                close: function (event, ui) {
                    //$('#txtDestination').focus();
                }
            });
        }
    });

</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {

        const form = document.getElementById("searchForm");
        const btn = document.getElementById("btnSearch");

        const txtService = document.getElementById("txtsearchservice");
        const txtCity = document.getElementById("txtCity");
        const txtArea = document.getElementById("txtArea");

        btn.addEventListener("click", function (e) {
            e.preventDefault(); // 🔒 extra safety

            if (txtService.value.trim() === "") {
                alert("Please select a service");
                txtService.focus();
                return false;
            }

            if (txtCity.value.trim() === "") {
                alert("Please select a city/town");
                txtCity.focus();
                return false;
            }

            if (txtArea.value.trim() === "") {
                alert("Please select an area/suburb");
                txtArea.focus();
                return false;
            }
            form.submit();
        });

        form.addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
                e.preventDefault();
                return false;
            }
        });
    });
</script>


<main class="main-wrapper">
    <!-- Start Slider Area -->
    <div class="axil-main-slider-area main-slider-style-5">
        <div class="slider-box-wrap">
            <div class="slider-activation-two axil-slick-dots">
                @foreach (var item in sliders)
                {
                    <div class="single-slide slick-slide">
                        <div class="main-slider-content">
                            <span class="subtitle"><i class="fas fa-fire"></i> @item.UpperTitle</span>
                            <h1 class="title">@item.LowerTitle</h1>
                            <div class="shop-btn">
                                <a href="/Categories" class="axil-btn btn-bg-secondary right-icon">Browse Categories <i class="fal fa-long-arrow-right"></i></a>
                            </div>
                        </div>
                        <div class="main-slider-thumb">
                            <img src="@item.Image" alt="Slider">
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
    <!-- End Slider Area -->
    <!-- Start Categorie Area  -->
    @*<div class="axil-categorie-area bg-color-white axil-section-gap pb--0">
        <div class="container">
            <div class="product-area pb--50">
                <div class="section-title-wrapper">
                    <h2 class="title text-center">Popular categories</h2>
                </div>
                <div class="categrie-product-activation-3 slick-layout-wrapper--15 mt--50 axil-slick-arrow  arrow-top-slide">
                    @foreach (var item in categories)
                    {
                        <div class="slick-single-layout slick-slide">
                            <div class="categrie-product categrie-product-3" data-sal="zoom-out" data-sal-delay="100" data-sal-duration="500">
                                <a href="/Categories/Subcategories?cateid=@item.Id">
                                    <img class="img-fluid" src="@item.Image" alt="@item.CategoryName">
                                    <h6 class="cat-title">@item.CategoryName</h6>
                                </a>
                            </div>
                        </div>
                    }
                    <div class="slick-single-layout slick-slide">
                        <div class="categrie-product categrie-product-3" data-sal="zoom-out" data-sal-delay="100" data-sal-duration="500">
                            <a href="#">
                                <i class="fa fa-cogs text-center" style="color: #0b7a43;padding:21px;font-size:35px"></i>
                                <h6 class="cat-title">How to</h6>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>*@
    <div class="how-to-sell-area axil-section-gap">
        <div class="container">
            <div class="product-area pb--50">
                <div class="section-title-wrapper section-title-center">
                    <h2 class="title">Popular categories</h2>
                </div>
                <div class="row row-cols-xl-8 row-cols-lg-8 row-cols-md-4 row-cols-sm-4 row-cols-4 row--20">
                    @foreach (var item in categories)
                    {
                        <a href="/Categories/Subcategories?cateid=@item.Id" class="col" style="padding:0 4px !important">
                            <div class="service-box how-to-sell" style="padding:5px;margin-bottom:10px">
                                <img class="img-fluid" src="@item.Image" alt="@item.CategoryName">
                                <span class="cate-name" style="margin:5px 0px;font-weight:bold">@item.CategoryName</span>
                            </div>
                        </a>
                    }
                    <a href="#howto" class="col" style="padding:0 4px !important">
                        <div class="service-box how-to-sell" style="padding:5px;margin-bottom:10px">
                            <img class="img-fluid" src="~/assets/images/how-to.png" alt="How to">
                            <span class="cate-name" style="margin:5px 0px;font-weight:bold">How to</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <!-- End Categorie Area  -->
    <!-- Start Categorie Area  -->
    <div class="axil-categorie-area bg-color-white axil-section-gap pb--0">
        <div class="container">
            <div class="product-area pb--100">
                <div class="section-title-wrapper">
                    <h2 class="title text-center mb-5">Search services</h2>
                </div>
                <form id="searchForm" method="get" action="/Categories/TradesPerson" onsubmit="return false;">
                    <div class="form-group mb-20 mt-5">
                        <label>Search Service</label>
                        <input type="text" class="form-control" name="service" autocomplete="off" id="txtsearchservice" placeholder="Search Service...">
                        <input type="hidden" name="sid" id="hdServiceID" />
                        <input type="hidden" name="cid" id="hdCID" />
                        <input type="hidden" name="scid" id="hdSCID" />
                    </div>
                    <div class="form-group">
                        <label>Search City/Town <span>*</span></label>
                        <input type="text" id="txtCity" autocomplete="off" class="fade-placeholder" placeholder="Search City/Town..." />
                        <input type="hidden" name="CityID" id="hdCityID" />
                    </div>
                    <div class="form-group">
                        <label>Search Business Area <span>*</span></label>
                        <input type="text" id="txtArea" autocomplete="off" class="fade-placeholder" placeholder="Search Area/Suburb..." />
                        <input type="hidden" name="PostalCodeID" id="hdAreaID" />
                    </div>
                    <div class="form-group mb-20 mt-5 text-center">
                        <button id="btnSearch" type="button" style="width:200px" class="axil-btn btn-bg-primary">Search</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- End Categorie Area  -->
    <!-- Start About Area  -->
    <div id="howto" class="axil-about-area about-style-1 axil-section-gap pb--50 mb--50" style="background-color: #F0F0F0;border-radius: 15%;">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-xl-6 col-lg-6">
                    <div class="about-thumbnail">
                        <div class="thumbnail">
                            <img style="width:88%" src="/assets/images/icons/how-it-works.png" alt="Bridging Africa">
                        </div>
                    </div>
                </div>
                <div class="col-xl-6 col-lg-6">
                    <div class="section-title-wrapper section-title-center">
                        <h2 class="title mb--0">How does it work?</h2>
                    </div>
                    <div class="about-content content-right">
                        <h5><span class="home-number">1.</span>Find your job category and subcategory for best match.</h5>
                        <h5><span class="home-number">2.</span>Enter your location for tradesperson around.</h5>
                        <h5><span class="home-number">3.</span>Get a wide list of best and verified tradesperson around you.</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End About Area  -->
    <!-- Start Why Choose Area  -->
    @*<div class="how-to-sell-area axil-section-gap">
            <div class="container">
                <div class="product-area pb--50">
                    <div class="section-title-wrapper section-title-center">
                        <h2 class="title">How does it work </h2>
                    </div>
                    <div class="row row-cols-xl-3 row-cols-lg-2 row-cols-md-2 row-cols-sm-2 row-cols-1 row--20">
                        <div class="col">
                            <div class="service-box how-to-sell">
                                <div class="icon">
                                    <h4 class="home-number">1</h4>
                                </div>
                                <h6 class="title">Find your category</h6>
                                <p>Find your job category and subcategory for best match</p>
                            </div>
                        </div>
                        <div class="col">
                            <div class="service-box how-to-sell">
                                <div class="icon">
                                    <h4 class="home-number">2</h4>
                                </div>
                                <h6 class="title">Enter your area/suburb</h6>
                                <p>Enter your area/suburb for tradesperson around.</p>
                            </div>
                        </div>
                        <div class="col">
                            <div class="service-box how-to-sell">
                                <div class="icon">
                                    <h4 class="home-number">3</h4>
                                </div>
                                <h6 class="title">Get best tradesperson</h6>
                                <p>Get a wide list of best and verified tradesperson around you.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>*@

    <div class="how-to-sell-area axil-section-gap mt--50 mb--50">
        <div class="container">
            <div class="product-area pb--50">
                <div class="section-title-wrapper section-title-center">
                    <h2 class="title">Why use Bridging Africa</h2>
                </div>
                <div class="row row-cols-xl-2 row-cols-lg-2 row-cols-md-2 row-cols-sm-2 row-cols-1 row--20">
                    <div class="col">
                        <div class="service-box how-to-sell">
                            <div class="icon">
                                <img src="~/assets/images/icons/service2.png" alt="Bridging Africa">
                            </div>
                            <h6 class="title">Access our community of top-rated tradespeople</h6>
                        </div>
                    </div>
                    <div class="col">
                        <div class="service-box how-to-sell">
                            <div class="icon">
                                <img src="~/assets/images/icons/Seconds.png" alt="Bridging Africa" />
                            </div>
                            <h6 class="title">Find a tradesperson in seconds</h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Start About Area  -->
    <div class="axil-about-area about-style-1 axil-section-gap" style="background-color: #1a5545; border-radius: 15%; ">
        <div class="container" style="margin-top: 40px; margin-bottom: 40px; ">
            <div class="row align-items-center">
                <div class="col-xl-4 col-lg-6">
                    <div class="about-thumbnail">
                        <div class="thumbnail">
                            <img src="~/assets/images/icons/JoinNow.png" alt="Bridging Africa">
                        </div>
                    </div>
                </div>
                <div class="col-xl-8 col-lg-6">
                    <div class="section-title-wrapper">
                        <h2 class="title white-color">Join as a Tradesperson </h2>
                    </div>
                    <div class="about-content">
                        <h6 class="white-color">Receive leads, win clients and grow your business by joining our network of tradespeople. You will have access to our cutting-edge tool and our feiendly support team.</h6>
                        <a href="/Tradesperson/TradespersonLogin" class="axil-btn btn-bg-secondary right-icon">Join Now <i class="fal fa-long-arrow-right"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End About Area  -->
    <!-- Start Axil Newsletter Area  -->
    <div class="axil-newsletter-area axil-section-gap mt--100">
        <div class="container">
            <div class="etrade-newsletter-wrapper bg_image bg_image--5">
                <div class="newsletter-content">
                    <h2 class="title mb--40 mb_sm--30">Do you need help?</h2>
                    <p>Whatever you need, we are here to help you. <br />We stay by your side until the job is done right.</p>
                    <a href="/Home/Contact" class="axil-btn btn-bg-secondary right-icon">Contact us <i class="fal fa-long-arrow-right"></i></a>
                </div>
            </div>
        </div>
        <!-- End .container -->
    </div>
    <!-- End Axil Newsletter Area  -->
</main>